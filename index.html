<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PsicoQuiz | Portal de Testes Psicol√≥gicos</title>
    <!-- Carregamento do Tailwind CSS para um design moderno e responsivo -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet">
    <style>
        /* Bloqueia a sele√ß√£o de texto e o menu de contexto (clique direito) */
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f7f9fc;
            background-image: url('mente.png'); /* FUNDO CORRIGIDO PARA .PNG */
            background-size: cover;
            background-position: center;
            background-attachment: fixed; /* Mant√©m a imagem fixa ao rolar */
            /* NOVAS REGRAS DE SEGURAN√áA B√ÅSICAS */
            user-select: none; /* Standard syntax */
            -webkit-user-select: none; /* Safari */
            -moz-user-select: none; /* Firefox */
            -ms-user-select: none; /* IE/Edge */
        }
        .quiz-container {
            max-width: 800px;
        }
        .likert-option {
            cursor: pointer;
            transition: all 0.2s;
        }
        .likert-option:hover {
            background-color: #eff6ff; /* blue-50 */
        }
        /* MUDAN√áA CRUCIAL: Contraste aprimorado para a op√ß√£o selecionada */
        .selected-option {
            background-color: #1d4ed8 !important; /* Blue-700 escuro */
            color: white;
            font-weight: 700;
            /* Adiciona uma borda chamativa ao redor */
            box-shadow: 0 0 0 4px #EC4899; /* Cor pink/magenta do tema */
            transform: scale(1.05); /* Pequeno zoom */
            border-color: transparent !important;
        }

        /* Estilo base para os Cards de Quiz */
        .quiz-card-select {
            cursor: pointer;
            transition: transform 0.3s, box-shadow 0.3s;
            position: relative;
            overflow: hidden;
            border: 4px solid #f8f8f8; 
            min-height: 250px;
            border-radius: 1rem; /* Arredondamento para todos */
        }
        .quiz-card-select::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.45); /* Overlay escuro */
            z-index: 1;
            border-radius: inherit;
        }
        .quiz-card-select:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 25px -5px rgba(0, 0, 0, 0.2);
        }
        .quiz-content {
            position: relative;
            z-index: 2; /* Garante que o conte√∫do fique acima do overlay */
        }
        /* Estilos espec√≠ficos para as imagens de fundo dos cards (TUDO EM .PNG) */
        #card-burnout { background-image: url('bernalt.png'); }
        #card-qi { background-image: url('qi.png'); background-color: #3b82f6; } 
        #card-stress { background-image: url('estresse.png'); }
        #card-anxiety { background-image: url('ansiedade.png'); }
        #card-sadness { background-image: url('triste.png'); }
        #card-humility { background-image: url('humilde.png'); }
        #card-arrogance { background-image: url('arrogante.png'); }

        .bg-cover-center {
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
        }

        /* Estilo para o Modal de Simula√ß√£o de Compra */
        .modal {
            background-color: rgba(0, 0, 0, 0.7);
        }

        /* Classes de cores chamativas */
        .text-shadow {
            text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.7);
        }
        /* Estilo para o pre√ßo riscado */
        .old-price {
            text-decoration: line-through;
            opacity: 0.7;
        }
        /* Estilo para o container do bot√£o do Mercado Pago */
        #payment-button-container {
            min-height: 50px; /* Garante que o bot√£o MP seja carregado */
            display: flex;
            justify-content: center;
            align-items: center;
            margin-top: 1rem;
        }
        /* Estilo para a tela de carregamento/aguardando transa√ß√£o */
        #loading-screen {
            background-color: rgba(255, 255, 255, 0.95);
            z-index: 100;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
            position: fixed; /* Adicionado fixed para cobrir toda a tela */
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
        }
        .loader {
            border: 5px solid #f3f3f3;
            border-top: 5px solid #EC4899;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            animation: spin 1s linear infinite;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body class="text-gray-800">

    <!-- 1. Header Fixo e Simples -->
    <header class="bg-white shadow-md sticky top-0 z-10">
        <nav class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4 flex justify-between items-center">
            <div class="flex items-center space-x-2">
                <!-- Logo/Marca com a cor Rosada (#EC4899) -->
                <span class="text-3xl font-extrabold text-pink-600">Psico</span>
                <span class="text-3xl font-extrabold text-gray-800">Quiz</span>
            </div>
        </nav>
    </header>

    <main>
        <!-- 2. Sele√ß√£o de Quiz (Hero Section) -->
        <section class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-10 sm:py-20 text-center" id="quiz-selection">
            <h1 class="text-5xl sm:text-6xl lg:text-7xl font-extrabold leading-tight text-white mb-4 text-shadow" style="color: #EC4899;">
                DESVENDE SUA MENTE
            </h1>
            <p class="text-xl text-white mb-12 text-shadow font-semibold">
                Escolha o teste psicol√≥gico que mais se encaixa com o momento atual da sua vida.
            </p>
            
            <!-- Grid de Cards de Sele√ß√£o -->
            <div id="quiz-cards-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                <!-- Cards ser√£o injetados aqui via JavaScript -->
            </div>
            
            <!-- CTA desnecess√°ria, pois a compra √© no final do quiz -->
            <div id="quiz-start-cta" class="hidden"></div> 

        </section>

        <!-- 3. Quiz Container (Onde as perguntas aparecer√£o) -->
        <section id="quiz-section" class="quiz-container mx-auto px-4 sm:px-6 lg:px-8 py-16 hidden">
            <div class="bg-white p-6 sm:p-10 rounded-xl shadow-2xl">
                <h2 id="active-quiz-title" class="text-3xl font-bold text-center mb-6 text-gray-900"></h2>
                
                <div id="quiz-questions" class="space-y-8">
                    <!-- Perguntas ser√£o injetadas aqui -->
                </div>
                
                <!-- Bot√£o de Envio/Resultado -->
                <div class="text-center mt-10">
                    <button id="submit-quiz-btn" class="px-8 py-3 bg-green-600 text-white text-lg font-bold rounded-lg shadow-lg hover:bg-green-700 transition duration-300 hidden">
                        VER MEU RESULTADO FINAL
                    </button>
                </div>

                <!-- √Årea de Resultado (Agora com a l√≥gica de bloqueio) -->
                <div id="quiz-result" class="mt-10 p-6 bg-gray-100 rounded-lg hidden">
                    <!-- Resultado ser√° injetado aqui -->
                </div>
            </div>
        </section>

        <!-- 4. Se√ß√£o Sobre N√≥s -->
        <section class="bg-gray-100 py-16 mt-8">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                <h2 class="text-3xl sm:text-4xl font-bold text-center mb-8 text-gray-900">
                    Sobre a PsicoQuiz
                </h2>
                <p class="text-center text-lg text-gray-600 max-w-4xl mx-auto">
                    A PsicoQuiz nasceu da necessidade de democratizar o acesso ao autoconhecimento. Acreditamos que todos merecem ferramentas valiosas para entender sua pr√≥pria mente. Nossos testes s√£o desenvolvidos com base em conceitos da psicologia, mas servem como um ponto de partida para sua jornada pessoal. Lembre-se: Autoconhecimento √© poder!
                </p>
            </div>
        </section>
    </main>

    <!-- 5. Footer -->
    <footer class="bg-gray-900 text-white py-8">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
            <p class="text-sm">&copy; 2025 PsicoQuiz. Todos os direitos reservados.</p>
            <p class="text-xs mt-2 text-gray-500">
                Aten√ß√£o: Nossos testes s√£o ferramentas de autoavalia√ß√£o e n√£o substituem um diagn√≥stico cl√≠nico profissional.
            </p>
        </div>
    </footer>
    
    <!-- Modal de Simula√ß√£o de Compra (Usado agora para o resultado) -->
    <div id="purchase-modal" class="modal fixed inset-0 flex items-center justify-center z-50 hidden">
        <div class="bg-white p-8 rounded-xl shadow-2xl max-w-md w-full text-center">
            <h3 id="modal-title" class="text-2xl font-bold text-gray-900 mb-4">Acesso Bloqueado</h3>
            <p class="text-gray-700 mb-2">Seu diagn√≥stico foi conclu√≠do, mas o **Relat√≥rio Completo** est√° bloqueado.</p>
            
            <!-- Estrat√©gia de Marketing - De R$ 25,00 por R$ 8,99 -->
            <p class="text-gray-500 text-lg old-price">De R$ 25,00</p>
            <p id="modal-price" class="text-4xl font-extrabold text-red-600 mb-4">Por R$ 8,99</p>

            <!-- Container onde o bot√£o REAL do Mercado Pago ser√° injetado -->
            <div id="payment-button-container" class="mb-4">
                <!-- O bot√£o ser√° inserido aqui pelo JavaScript -->
            </div>
            
            <p class="text-xs text-gray-500 mb-4">A transa√ß√£o ser√° processada no ambiente seguro do Mercado Pago.</p>

            <button id="close-modal-btn" class="text-sm text-gray-500 hover:text-gray-700 transition">
                Voltar aos Testes
            </button>
        </div>
    </div>
    
    <!-- Tela de Carregamento (Simula√ß√£o de Transa√ß√£o) -->
    <div id="loading-screen" class="fixed inset-0 hidden">
        <div class="loader"></div>
        <p class="mt-4 text-xl font-semibold text-gray-700">Aguardando Confirma√ß√£o do Pagamento...</p>
        <p class="text-sm text-gray-500">Isso pode levar alguns instantes.</p>
    </div>

    <!-- INTEGRA√á√ÉO DO SDK DO MERCADO PAGO (FIX: Colocado aqui para carregar antes do script principal) -->
    <script src="https://sdk.mercadopago.com/js/v2"></script> 

    <script>
        // Adiciona um evento para impedir o clique direito em todo o documento
        document.addEventListener('contextmenu', event => event.preventDefault());

        // CHAVE P√öBLICA (N√ÉO O ACCESS TOKEN SECRETO)
        const MERCADO_PAGO_PUBLIC_KEY = 'APP_USR-3dcd6d31-9cf4-414b-adee-952f61d7e9bc'; 
        
        // ID DE PREFER√äNCIA FORNECIDO PELO USU√ÅRIO (Simula√ß√£o de 7 quizzes com o mesmo valor)
        // ATEN√á√ÉO: Na vida real, voc√™ geraria um ID de prefer√™ncia √öNICO para cada quiz no painel do MP.
        const PREFERENCE_ID_SIMULADO = "265432817-4dfb9e66-35a4-4d6e-906b-a88bd09e4248";
        
        const likertScale = [
            { text: "Nunca", value: 1, class: 'bg-green-100 hover:bg-green-200 text-green-800' },
            { text: "Raramente", value: 2, class: 'bg-lime-100 hover:bg-lime-200 text-lime-800' },
            { text: "√Äs vezes", value: 3, class: 'bg-yellow-100 hover:bg-yellow-200 text-yellow-800' },
            { text: "Frequentemente", value: 4, class: 'bg-orange-100 hover:bg-orange-200 text-orange-800' },
            { text: "Sempre", value: 5, class: 'bg-red-100 hover:bg-red-200 text-red-800' }
        ];

        let userAnswers = [];
        let activeQuizId = null;
        const PRICE_DISPLAY = "R$ 8,99"; 
        
        // Inicializa o SDK do Mercado Pago
        const mp = new MercadoPago(MERCADO_PAGO_PUBLIC_KEY, {
            locale: 'pt-BR'
        });

        const quizzes = {
            burnout: {
                title: "Teste de Risco de Burnout",
                subtitle: "Avalie sua exaust√£o emocional, cinismo e efic√°cia profissional.",
                card_id: "card-burnout",
                image_url: 'bernalt.png', 
                questions: [
                    "1. Sinto-me emocionalmente exausto(a) ao final do dia de trabalho.",
                    "2. Sinto-me cansado(a) logo ao acordar e ter que encarar o trabalho.",
                    "3. Consigo resolver os problemas do trabalho de forma eficaz. (Invertida)",
                    "4. Sinto que estou me esfor√ßando demais, mas n√£o vejo resultados.",
                    "5. Lidar com pessoas no meu trabalho √© um grande estresse.",
                    "6. Sinto que n√£o estou fazendo a diferen√ßa na minha √°rea.",
                    "7. O trabalho tem consumido todo o meu tempo livre.",
                    "8. Minha concentra√ß√£o fora do trabalho tem sido afetada.",
                    "9. Sinto-me revigorado(a) ap√≥s as folgas ou feriados. (Invertida)",
                    "10. Tenho pensado em desistir da minha profiss√£o ou mudar de √°rea.",
                    "11. Meu sono tem sido de m√° qualidade e insuficiente.",
                    "12. Tenho negligenciado meus hobbies e vida social.",
                    "13. Consigo lidar com o excesso de tarefas com calma. (Invertida)",
                    "14. Sinto que meu futuro na empresa √© limitado ou incerto.",
                    "15. Tenho tido dores de cabe√ßa ou musculares frequentes.",
                    "16. Sinto-me motivado(a) para come√ßar novos projetos. (Invertida)",
                    "17. Eu evito intera√ß√µes sociais no ambiente de trabalho.",
                    "18. Sinto que tenho pouco controle sobre minha carga de trabalho.",
                    "19. Consigo separar minha vida pessoal dos problemas do trabalho. (Invertida)",
                    "20. Eu sou c√≠nico(a) ou cr√≠tico(a) com a maioria das pessoas no trabalho.",
                    "21. Sinto que a energia que invisto n√£o compensa o resultado.",
                    "22. Tenho usado mais caf√©, √°lcool ou cigarros para lidar com o estresse.",
                    "23. Meus colegas de trabalho parecem mais competentes do que eu.",
                    "24. Minha produtividade diminuiu significativamente nos √∫ltimos meses.",
                    "25. A press√£o no trabalho me faz sentir ansioso(a) ou deprimido(a).",
                    "26. Sinto-me um(a) profissional realizado(a). (Invertida)",
                    "27. Tenho tido lapsos de mem√≥ria ou dificuldade de racioc√≠nio.",
                    "28. Eu me afasto emocionalmente dos problemas de trabalho dos outros.",
                    "29. Consigo manter uma perspectiva positiva sobre o trabalho. (Invertida)",
                    "30. Sinto que o meu trabalho exige mais de mim do que eu posso dar."
                ],
                inverted_questions: [3, 9, 13, 16, 19, 26, 29], 
                
                get_result: (score) => {
                    if (score <= 65) return { title: "Baixo Risco", desc: "Sua pontua√ß√£o indica um excelente manejo de estresse e alta efic√°cia. Mantenha o foco no equil√≠brio entre vida pessoal e profissional. (Este √© o √∫nico feedback GR√ÅTIS)", color: 'bg-green-500' };
                    if (score <= 105) return { title: "Risco Moderado (Alerta)", desc: "Sinais de sobrecarga est√£o presentes. √â fundamental ver o diagn√≥stico completo para evitar o esgotamento. (Este √© o √∫nico feedback GR√ÅTIS)", color: 'bg-yellow-500' };
                    return { title: "Alto Risco de Burnout", desc: "Aten√ß√£o! Sua pontua√ß√£o √© ALTA. N√£o podemos te dar detalhes aqui. Adquira o acesso para ver o plano de a√ß√£o urgente. (Este √© o √∫nico feedback GR√ÅTIS)", color: 'bg-red-500' };
                }
            },
            qi: {
                title: "Teste de QI e Racioc√≠nio",
                subtitle: "Avalie sua intelig√™ncia fluida e capacidade de resolver problemas l√≥gicos.",
                card_id: "card-qi",
                image_url: 'qi.png', 
                questions: [
                    "1. Eu resolvo problemas complexos rapidamente, mesmo sob press√£o.",
                    "2. Consigo identificar padr√µes e sequ√™ncias em informa√ß√µes aleat√≥rias.",
                    "3. Eu entendo e utilizo bem a l√≥gica abstrata (matem√°tica, c√≥digos, etc.).",
                    "4. Eu aprendo novas habilidades conceituais com facilidade.",
                    "5. Eu consigo fazer conex√µes entre ideias que parecem n√£o relacionadas.",
                    "6. Quando me deparo com um novo problema, consigo criar rapidamente diferentes estrat√©gias de solu√ß√£o.",
                    "7. Eu me divirto com jogos e desafios que envolvem l√≥gica e racioc√≠nio.",
                    "8. Minha mem√≥ria de trabalho (capacidaded de manter informa√ß√µes tempor√°rias) √© excelente.",
                    "9. Eu tenho facilidade em visualizar objetos tridimensionais na minha mente.",
                    "10. Eu consigo entender e explicar conceitos complexos para outras pessoas de forma simple.",
                    "11. Eu percebo pequenos detalhes e discrep√¢ncias que a maioria das pessoas ignora.",
                    "12. Eu sou muito bom(a) em identificar a causa raiz de um problema.",
                    "13. Eu costumo ver o quadro geral em vez de me perder nos detalhes. (Invertida)",
                    "14. Eu tenho dificuldade em reter informa√ß√µes de diagramas ou gr√°ficos. (Invertida)",
                    "15. Minhas decis√µes s√£o sempre baseadas em l√≥gica e n√£o em emo√ß√£o.",
                    "16. Eu consigo manter o foco por longos per√≠odos em tarefas intelectuais.",
                    "17. Eu sou r√°pido(a) em fazer c√°lculos mentais e estimativas.",
                    "18. Tenho facilidade em aprender novas l√≠nguas ou linguagens de programa√ß√£o.",
                    "19. Se for dado um conjunto de dados, consigo tirar conclus√µes v√°lidas a partir deles.",
                    "20. Eu me sinto frustrado(a) rapidamente quando n√£o consigo resolver um enigma. (Invertida)",
                    "21. Eu tenho um vocabul√°rio vasto e consigo articular minhas ideias com clareza.",
                    "22. Eu consigo trabalhar em m√∫ltiplas tarefas complexas ao mesmo tempo. (Invertida)",
                    "23. Eu sou bom(a) em resolver quebra-cabe√ßas e jogos de estrat√©gia.",
                    "24. Eu consigo me adaptar rapidamente a novos ambientes e regras.",
                    "25. Eu costumo ler muito r√°pido e reter a maior parte das informa√ß√µes.",
                    "26. Eu questiono e analiso as informa√ß√µes antes de aceit√°-las como verdade.",
                    "27. Eu consigo prever o resultado de a√ß√µes ou eventos com precis√£o.",
                    "28. Eu sou bom(a) em identificar e corrigir meus pr√≥prios erros de l√≥gica.",
                    "29. Eu tenho dificuldade em organizar meus pensamentos em uma discuss√£o. (Invertida)",
                    "30. Eu sinto que minha mente trabalha em alta velocidade."
                ],
                inverted_questions: [13, 14, 20, 22, 29], // 5 perguntas invertidas
                get_result: (score) => {
                    if (score <= 85) return { title: "Racioc√≠nio B√°sico", desc: "Sua pontua√ß√£o indica um racioc√≠nio l√≥gico funcional, mas que se beneficia de exerc√≠cios di√°rios. Adquira o acesso para ver o plano de melhoria.", color: 'bg-yellow-500' };
                    if (score <= 130) return { title: "Racioc√≠nio Acima da M√©dia", desc: "Sua capacidade l√≥gica e fluida √© forte. Adquira o acesso para ver o score exato e √°reas de excel√™ncia.", color: 'bg-green-500' };
                    return { title: "Racioc√≠nio Excepcional (QI Alto)", desc: "Sua pontua√ß√£o √© extremamente alta! Adquira o acesso para ver o score exato e o relat√≥rio completo.", color: 'bg-blue-600' };
                }
            },
            stress: {
                title: "Qu√£o Estressado Eu Sou?",
                subtitle: "Descubra seu n√≠vel de tens√£o, sobrecarga e capacidade de relaxamento.",
                card_id: "card-stress",
                image_url: 'estresse.png', 
                questions: [
                    "1. Tenho dificuldade em pegar no sono devido a preocupa√ß√µes.",
                    "2. Sinto meus m√∫sculos tensos com frequ√™ncia (ombros, pesco√ßo).",
                    "3. Minha mente corre sem parar, mesmo quando tento relaxar.",
                    "4. Tenho me sentido irritado(a) ou impaciente facilmente.",
                    "5. Sinto que tenho pouco controle sobre os acontecimentos da minha vida.",
                    "6. Consigo relaxar e descontrair completamente ap√≥s o trabalho. (Invertida)",
                    "7. Sinto que h√° mais demandas do que minha capacidade de lidar.",
                    "8. Tenho tido dores de cabe√ßa frequentes ou problemas estomacais.",
                    "9. Minhas atividades de lazer me d√£o prazer genu√≠no. (Invertida)",
                    "10. Eu me preocupo em excesso com coisas que n√£o posso mudar.",
                    "11. Tenho me alimentado de forma irregular ou comi demais por causa da tens√£o.",
                    "12. Fico facilmente agitado(a) ou com a sensa√ß√£o de 'motor ligado'.",
                    "13. Consigo manter a calma em situa√ß√µes de incerteza. (Invertida)",
                    "14. Sinto que estou sempre correndo contra o tempo.",
                    "15. Tenho dificuldade em dizer 'n√£o' para novas responsabilidades.",
                    "16. Sinto que tenho apoio social adequado (amigos, fam√≠lia). (Invertida)",
                    "17. Tenho tido ataques de raiva ou explos√µes emocionais.",
                    "18. Minhas obriga√ß√µes parecem esmagadoras na maioria das vezes.",
                    "19. Eu tenho um tempo di√°rio dedicado a medita√ß√£o ou relaxamento. (Invertida)",
                    "20. Tenho ro√≠do unhas, batido os p√©s ou outros tiques nervosos.",
                    "21. Sinto-me frequentemente sobrecarregado(a) pelas responsabilidades.",
                    "22. Tenho dificuldade em focar em uma tarefa por vez.",
                    "23. Consigo me organizar de forma eficiente para evitar correria. (Invertida)",
                    "24. A falta de tempo me impede de cuidar da minha sa√∫de.",
                    "25. Sinto-me culpado(a) quando estou descansando ou me divertindo.",
                    "26. Meu n√≠vel de energia √© consistentemente alto. (Invertida)",
                    "27. O stress tem afetado negativamente minhas rela√ß√µes.",
                    "28. Eu priorizo minhas necessidades em rela√ß√£o √†s dos outros. (Invertida)",
                    "29. Sinto que estou sempre 'apagando inc√™ndios' em vez de planejar.",
                    "30. Tenho tido mais gripes ou problemas de sa√∫de por imunidade baixa."
                ],
                inverted_questions: [6, 9, 13, 16, 19, 23, 26, 28],
                get_result: (score) => {
                    if (score <= 60) return { title: "Stress Baixo e Saud√°vel", desc: "Voc√™ demonstra √≥tima resili√™ncia e controle. Adquira o relat√≥rio completo para manter esse equil√≠brio. (Este √© o √∫nico feedback GR√ÅTIS)", color: 'bg-green-500' };
                    if (score <= 100) return { title: "Stress Moderado (Cuidado)", desc: "Sinais de sobrecarga est√£o presentes. √â crucial ver o diagn√≥stico completo para adotar t√©cnicas de relaxamento eficazes. (Este √© o √∫nico feedback GR√ÅTIS)", color: 'bg-yellow-500' };
                    return { title: "Stress Alto (Interven√ß√£o Urgente)", desc: "Voc√™ est√° sob intensa press√£o! N√£o podemos te dar detalhes aqui. Adquira o acesso para ver o plano de redu√ß√£o imediata do stress. (Este √© o √∫nico feedback GR√ÅTIS)", color: 'bg-red-500' };
                }
            },
            anxiety: {
                title: "Qual o Meu N√≠vel de Ansiedade?",
                subtitle: "Avalia√ß√£o do seu estado de apreens√£o, medo, e preocupa√ß√£o excessiva.",
                card_id: "card-anxiety",
                image_url: 'ansiedade.png',
                questions: [
                    "1. Sinto palpita√ß√µes, tonturas ou respira√ß√£o ofegante sem raz√£o aparente.",
                    "2. Tenho evitado situa√ß√µes sociais ou desafios por medo.",
                    "3. Sinto que algo ruim pode acontecer a qualquer momento.",
                    "4. Tenho dificuldade em controlar a preocupa√ß√£o di√°ria, ela me domina.",
                    "5. Consigo manter a calma em situa√ß√µes de incerteza. (Invertida)",
                    "6. Minha mente fica constantemente revirada, pensando em 'e se...'.",
                    "7. Tenho tido tremores, formigamento ou sensa√ß√£o de desequil√≠brio.",
                    "8. Costumo ensaiar mentalmente conversas ou eventos futuros exaustivamente.",
                    "9. Me sinto seguro(a) e tranquilo(a) na maioria das vezes. (Invertida)",
                    "10. Fico inquieto(a), agitado(a) ou incapaz de relaxar o corpo.",
                    "11. Tenho problemas gastrointestinais (dor de barriga, n√°useas) quando estou nervoso(a).",
                    "12. Eu me irrito facilmente com pequenos aborrecimentos di√°rios.",
                    "13. Tenho receio de ser julgado(a) ou criticado(a) pelos outros.",
                    "14. Fico obcecado(a) por detalhes ou buscando a perfei√ß√£o.",
                    "15. Consigo desfrutar do presente sem pensar no futuro. (Invertida)",
                    "16. Tenho um medo irracional de algo (ex: altura, espa√ßos fechados, insetos).",
                    "17. Evito tomar decis√µes com medo de cometer o erro errado.",
                    "18. Consigo me concentrar em tarefas que exigem muita aten√ß√£o. (Invertida)",
                    "19. Sinto que n√£o sou capaz de lidar com os problemas que surgem.",
                    "20. Tenho tido pesadelos ou desperto no meio da noite com preocupa√ß√µes.",
                    "21. Eu busco tranquilidade na maior parte do tempo. (Invertida)",
                    "22. Minhas preocupa√ß√µes duram por longos per√≠odos, sem al√≠vio.",
                    "23. Tenho dificuldade em expressar minhas emo√ß√µes de forma calma. (Invertida)",
                    "24. Sinto que preciso estar sempre alerta ou em guarda.",
                    "25. Eu costumo me isolar quando me sinto muito ansioso(a).",
                    "26. Minha ansiedade interfere nas minhas obriga√ß√µes di√°rias.",
                    "27. Consigo rir e me divertir com facilidade. (Invertida)",
                    "28. Sinto que perdi o controle sobre minhas rea√ß√µes emocionais.",
                    "29. Tenho tido pensamentos repetitivos e dif√≠ceis de ignorar.",
                    "30. Minha qualidade de vida √© boa e satisfat√≥ria. (Invertida)"
                ],
                inverted_questions: [5, 9, 15, 18, 21, 23, 27, 30],
                get_result: (score) => {
                    if (score <= 65) return { title: "Ansiedade Baixa", desc: "Voc√™ lida bem com a maioria das incertezas e demonstra boa capacidade de manter a calma. Adquira o acesso para ver a an√°lise completa. (Este √© o √∫nico feedback GR√ÅTIS)", color: 'bg-green-500' };
                    if (score <= 105) return { title: "Ansiedade Moderada", desc: "Sua pontua√ß√£o indica sinais de apreens√£o. √â crucial ver o diagn√≥stico completo para adotar t√©cnicas de controle. (Este √© o √∫nico feedback GR√ÅTIS)", color: 'bg-yellow-500' };
                    return { title: "Ansiedade Elevada", desc: "O seu n√≠vel de apreens√£o e medo √© alto. N√£o podemos te dar detalhes aqui. Adquira o acesso para ver o plano de redu√ß√£o urgente. (Este √© o √∫nico feedback GR√ÅTIS)", color: 'bg-red-500' };
                }
            },
            sadness: {
                title: "Qu√£o Triste Estou?",
                subtitle: "Mapeamento do seu humor, energia, motiva√ß√£o e satisfa√ß√£o geral com a vida.",
                card_id: "card-sadness",
                image_url: 'triste.png',
                questions: [
                    "1. Tenho perdido o interesse em atividades que antes gostava.",
                    "2. Sinto uma tristeza constante na maior parte do dia.",
                    "3. Sinto-me sem energia ou com muita fadiga, mesmo ap√≥s descansar.",
                    "4. Meu apetite e/ou meu sono mudaram drasticamente (mais ou menos).",
                    "5. Tenho dificuldade em me concentrar ou tomar decis√µes simples.",
                    "6. Sinto que a vida vale a pena e sou grato(a) por ela. (Invertida)",
                    "7. Tenho tido sentimentos de culpa ou inutilidade.",
                    "8. Sinto que o futuro √© sombrio, sem esperan√ßa ou perspectivas.",
                    "9. Minha energia f√≠sica e mental est√° alta. (Invertida)",
                    "10. Tenho chorado com mais frequ√™ncia que o normal.",
                    "11. Tenho me isolado de amigos e familiares.",
                    "12. Eu me sinto mal com o meu pr√≥prio corpo ou apar√™ncia.",
                    "13. Consigo rir e me divertir quando estou com outras pessoas. (Invertida)",
                    "14. Sinto que sou um fardo para as pessoas ao meu redor.",
                    "15. Tenho pensado em me machucar ou em n√£o querer mais viver.",
                    "16. Tenho um sono reparador na maioria das noites. (Invertida)",
                    "17. Sinto-me constantemente irritado(a) ou impaciente.",
                    "18. Minhas atividades de lazer me d√£o prazer genu√≠no. (Invertida)",
                    "19. Tenho tido lapsos de mem√≥ria ou confus√£o mental.",
                    "20. Consigo ver o lado positivo das situa√ß√µes. (Invertida)",
                    "21. Minha autoestima est√° consistentemente baixa.",
                    "22. Tenho evitado sair de casa ou ir ao trabalho/estudo.",
                    "23. Eu acredito que as coisas v√£o melhorar para mim. (Invertida)",
                    "24. Tenho perdido peso ou ganhado peso de forma inesperada.",
                    "25. As pessoas notam que meu humor est√° consistentemente para baixo.",
                    "26. Eu me sinto muito sozinho(a) e incompreendido(a).",
                    "27. Minha motiva√ß√£o para realizar tarefas di√°rias √© alta. (Invertida)",
                    "28. Eu me sinto ap√°tico(a) ou indiferente a tudo.",
                    "29. Consigo manter uma rotina saud√°vel. (Invertida)",
                    "30. Eu me sinto confort√°vel com quem eu sou. (Invertida)"
                ],
                inverted_questions: [6, 9, 13, 16, 18, 20, 23, 27, 29, 30],
                get_result: (score) => {
                    if (score <= 60) return { title: "Humor Est√°vel (Saud√°vel)", desc: "Seu estado emocional √© equilibrado. Adquira o acesso para ver a an√°lise completa. (Este √© o √∫nico feedback GR√ÅTIS)", color: 'bg-green-500' };
                    if (score <= 100) return { title: "Tristeza Moderada (Aten√ß√£o)", desc: "Sinais de des√¢nimo est√£o presentes. √â crucial ver o diagn√≥stico completo para recuperar sua energia. (Este √© o √∫nico feedback GR√ÅTIS)", color: 'bg-yellow-500' };
                    return { title: "Tristeza Significativa (Alerta)", desc: "Os sinais indicam um estado de humor persistente e baixo. N√£o podemos te dar detalhes aqui. Adquira o acesso para ver o plano de apoio urgente. (Este √© o √∫nico feedback GR√ÅTIS)", color: 'bg-red-500' };
                }
            },
            arrogance: {
                title: "Sou Uma Pessoa Arrogante?",
                subtitle: "Avalia√ß√£o da sua autoimport√¢ncia, necessidade de valida√ß√£o e desvaloriza√ß√£o alheia.",
                card_id: "card-arrogance",
                image_url: 'arrogante.png',
                questions: [
                    "1. Sinto que sou superior √† maioria das pessoas ao meu redor.",
                    "2. Fico incomodado(a) se n√£o sou o centro das aten√ß√µes.",
                    "3. Eu facilmente desvalorizo as conquistas de pessoas que n√£o gosto.",
                    "4. Consigo aceitar que h√° pessoas mais talentosas do que eu. (Invertida)",
                    "5. Interrompo os outros com frequ√™ncia para expressar minha opini√£o.",
                    "6. Eu acredito que as regras se aplicam mais aos outros do que a mim.",
                    "7. Recebo elogios com gratid√£o e simplicidade. (Invertida)",
                    "8. Sinto a necessidade de 'corrigir' as pessoas em p√∫blico.",
                    "9. Pe√ßo desculpas e reconhe√ßo erros de forma sincera. (Invertida)",
                    "10. Eu me considero uma pessoa especial e √∫nica.",
                    "11. Fico com inveja do sucesso alheio.",
                    "12. Eu realmente escuto as cr√≠ticas, mesmo que doa. (Invertida)",
                    "13. Eu costumo me gabar das minhas conquistas e bens materiais.",
                    "14. Consigo rir de mim mesmo(a). (Invertida)",
                    "15. Acredito que as minhas solu√ß√µes s√£o as √∫nicas eficazes para os problemas.",
                    "16. Meu valor como pessoa est√° ligado ao que eu conquisto. (Invertida)",
                    "17. Eu tenho facilidade em admitir minha ignor√¢ncia sobre um assunto. (Invertida)",
                    "18. Eu evito pedir ajuda, pois isso me faria parecer fraco(a).",
                    "19. Eu me sinto muito superior a colegas de trabalho/estudo.",
                    "20. Costumo ignorar conselhos, pois sei o que √© melhor. (Invertida)",
                    "21. Eu me preocupo em manter as apar√™ncias de sucesso.",
                    "22. Eu me sinto bem quando sou o centro das aten√ß√µes. (Invertida)",
                    "23. Eu trato todas as pessoas com o mesmo n√≠vel de respeito. (Invertida)",
                    "24. Eu sinto que mere√ßo tratamento especial ou privil√©gios.",
                    "25. Eu raramente admito que algu√©m √© mais inteligente que eu.",
                    "26. Eu reconhe√ßo a import√¢ncia do trabalho em equipe. (Invertida)",
                    "27. Eu dou valor igual √†s contribui√ß√µes de todos.",
                    "28. Eu sou uma pessoa modesta. (Invertida)",
                    "29. Tenho dificuldade em interagir com pessoas de status social mais baixo.",
                    "30. Eu desconfio facilmente das inten√ß√µes dos outros."
                ],
                inverted_questions: [4, 7, 9, 12, 14, 16, 17, 20, 22, 23, 26, 28],
                get_result: (score) => {
                    if (score <= 80) return { title: "Arrog√¢ncia Baixa (Modestia)", desc: "Sua pontua√ß√£o √© baixa. Adquira o acesso para ver o plano de desenvolvimento. (Este √© o √∫nico feedback GR√ÅTIS)", color: 'bg-green-500' };
                    if (score <= 120) return { title: "Arrog√¢ncia Moderada", desc: "H√° tra√ßos de autoimport√¢ncia ou inseguran√ßa em situa√ß√µes espec√≠ficas. Adquira o acesso para ver a an√°lise completa. (Este √© o √∫nico feedback GR√ÅTIS)", color: 'bg-yellow-500' };
                    return { title: "Arrog√¢ncia Alta (Cuidado)", desc: "Os sinais de autoimport√¢ncia s√£o altos. N√£o podemos te dar detalhes aqui. Adquira o acesso para ver o plano de melhoria urgente. (Este √© o √∫nico feedback GR√ÅTIS)", color: 'bg-red-500' };
                }
            },
            humility: {
                title: "Sou Uma Pessoa Humilde?",
                subtitle: "Avalie sua abertura a cr√≠ticas, valoriza√ß√£o dos outros e autopercep√ß√£o.",
                card_id: "card-humility",
                image_url: 'humilde.png',
                questions: [
                    "1. Admito meus erros facilmente e sem me justificar.",
                    "2. Eu procuro ativamente e valorizo o feedback negativo.",
                    "3. Sinto que meu sucesso se deve apenas ao meu talento, n√£o aos outros. (Invertida)",
                    "4. Me coloco no lugar dos outros para entender suas falhas.",
                    "5. Eu costumo dominar as conversas em grupo. (Invertida)",
                    "6. Acredito que todos, independentemente do cargo, t√™m algo a me ensinar.",
                    "7. Fico ressentido(a) quando algu√©m faz algo melhor que eu. (Invertida)",
                    "8. Reconhe√ßo e elogio publicamente as conquistas dos outros.",
                    "9. Penso que minhas opini√µes s√£o as mais corretas na maioria das vezes. (Invertida)",
                    "10. Pe√ßo desculpas rapidamente quando sei que errei.",
                    "11. Eu me sinto ofendido(a) quando minhas ideias s√£o rejeitadas. (Invertida)",
                    "12. Eu realmente ou√ßo a perspectiva dos outros sem interromper.",
                    "13. Sinto que a maioria das pessoas n√£o entende minha genialidade. (Invertida)",
                    "14. Eu dou cr√©dito a quem merece sem me preocupar em ser o centro das aten√ß√µes.",
                    "15. Evito falar sobre minhas conquistas para n√£o parecer arrogante.",
                    "16. Aceito que posso estar errado(a) sobre assuntos que domino.",
                    "17. Eu me comparo negativamente com os outros. (Invertida)",
                    "18. Meus amigos diriam que sou uma pessoa de 'cabe√ßa aberta'.",
                    "19. Eu me irrito com pessoas que fazem perguntas '√≥bvias'. (Invertida)",
                    "20. Eu me sinto √† vontade pedindo ajuda quando preciso.",
                    "21. Acredito que a maioria das pessoas s√£o bem-intencionadas.",
                    "22. Tenho dificuldade em elogiar ou admirar o sucesso alheio. (Invertida)",
                    "23. Fico chateado(a) se n√£o sou convidado(a) para eventos importantes. (Invertida)",
                    "24. Eu me preocupo mais em aprender do que em impressionar.",
                    "25. Acredito que h√° muitas li√ß√µes a serem aprendidas com o fracasso.",
                    "26. Eu me sinto superior intelectualmente √† maioria das pessoas. (Invertida)",
                    "27. Consigo me alegrar sinceramente com o sucesso dos outros.",
                    "28. Eu sou paciente ao ensinar algo a algu√©m que est√° aprendendo.",
                    "29. Tenho o costume de corrigir os erros dos outros em p√∫blico. (Invertida)",
                    "30. Eu valorizo o esfor√ßo tanto quanto o resultado final."
                ],
                inverted_questions: [3, 5, 7, 9, 11, 13, 17, 19, 22, 23, 26, 29],
                get_result: (score) => {
                    if (score <= 80) return { title: "Humildade em Constru√ß√£o", desc: "Sua pontua√ß√£o sugere dificuldades em aceitar falhas e dar cr√©dito aos outros, com tra√ßos de autoimport√¢ncia. Adquira o acesso para ver o plano de desenvolvimento. (Este √© o √∫nico feedback GR√ÅTIS)", color: 'bg-red-500' };
                    if (score <= 120) return { title: "Humildade Moderada", desc: "Voc√™ demonstra equil√≠brio, mas pode ter dificuldade em aceitar cr√≠ticas. Adquira o acesso para ver a an√°lise completa. (Este √© o √∫nico feedback GR√ÅTIS)", color: 'bg-yellow-500' };
                    return { title: "Humildade Alta", desc: "Voc√™ demonstra uma forte capacidade de autoconhecimento. Adquira o acesso para ver o plano de a√ß√£o para potencializar seu perfil. (Este √© o √∫nico feedback GR√ÅTIS)", color: 'bg-green-500' };
                }
            }
        };

        const quizCardsGrid = document.getElementById('quiz-cards-grid');
        const quizSelection = document.getElementById('quiz-selection');
        const quizStartCta = document.getElementById('quiz-start-cta');
        const quizCtaTitle = document.getElementById('quiz-cta-title');
        const quizCtaSubtitle = document.getElementById('quiz-cta-subtitle');
        const buyQuizBtn = document.getElementById('buy-quiz-btn'); 
        const quizSection = document.getElementById('quiz-section');
        const activeQuizTitle = document.getElementById('active-quiz-title');
        const quizQuestionsContainer = document.getElementById('quiz-questions');
        const submitQuizBtn = document.getElementById('submit-quiz-btn');
        const quizResultArea = document.getElementById('quiz-result');
        const purchaseModal = document.getElementById('purchase-modal');
        const modalTitle = document.getElementById('modal-title');
        const modalPrice = document.getElementById('modal-price');
        const confirmPurchaseBtn = document.getElementById('confirm-purchase-btn');
        const closeModalBtn = document.getElementById('close-modal-btn');
        const loadingScreen = document.getElementById('loading-screen');
        const paymentButtonContainer = document.getElementById('payment-button-container');


        // Renderiza os cards de sele√ß√£o na Home
        function renderQuizCards() {
            // ORDEM CORRIGIDA FINAL: Burnout, QI, Stress, Ansiedade, Tristeza, Arrog√¢ncia, Humildade
            const orderedKeys = ['burnout', 'qi', 'stress', 'anxiety', 'sadness', 'arrogance', 'humility'];
            
            quizCardsGrid.innerHTML = orderedKeys.map(key => {
                const quiz = quizzes[key];
                if (!quiz) return ''; 
                
                return `
                    <div id="${quiz.card_id}" 
                         class="quiz-card-select bg-cover-center p-6 rounded-xl shadow-lg flex flex-col justify-end text-white" 
                         data-quiz-id="${key}"
                         style="background-image: url('${quiz.image_url}');">
                        <div class="quiz-content">
                            <h3 class="text-2xl font-bold mb-1 text-red-500 text-shadow">${quiz.title}</h3>
                            <p class="text-sm opacity-90 text-white text-shadow">${quiz.subtitle}</p>
                            <span class="inline-block mt-3 px-3 py-1 bg-blue-600 text-white text-xs font-semibold rounded-full hover:bg-blue-700 transition">
                                CLIQUE PARA INICIAR TESTE GRATUITO
                            </span>
                        </div>
                    </div>
                `;
            }).join('');

            document.querySelectorAll('.quiz-card-select').forEach(card => {
                card.addEventListener('click', handleQuizSelection);
            });
        }
        
        // Manipula a sele√ß√£o do Quiz (A√ß√£o ao clicar no card)
        function handleQuizSelection(event) {
            const card = event.currentTarget;
            const quizId = card.getAttribute('data-quiz-id');
            
            activeQuizId = quizId;
            loadQuiz(); // Inicia o quiz diretamente
        }

        // --- COBRAN√áA NO FINAL DO QUIZ ---
        // Exibe o modal de compra ao clicar em 'VER MEU RESULTADO FINAL'
        submitQuizBtn.addEventListener('click', () => {
            const quiz = quizzes[activeQuizId];
            
            // 1. Calcula a pontua√ß√£o e mostra o feedback GR√ÅTIS
            calculateAndShowFreeResult(); 
            
            // 2. Bloqueia o resultado detalhado com o modal de compra
            modalTitle.textContent = `Desbloquear Relat√≥rio ${quiz.title}`;
            
            // 3. Injeta o bot√£o REAL do Mercado Pago no container (Usando o ID Fixo)
            injectMercadoPagoButton(PREFERENCE_ID_SIMULADO); 
            
            purchaseModal.classList.remove('hidden');
        });

        // Fun√ß√£o que injeta o bot√£o real do Mercado Pago (usando o script que voc√™ enviou)
        function injectMercadoPagoButton(preferenceId) {
            paymentButtonContainer.innerHTML = ''; // Limpa o container
            
            // Cria o bot√£o com a prefer√™ncia (usando o script que o Mercado Pago gerou para voc√™)
            const mpButtonScript = document.createElement('script');
            mpButtonScript.src = "https://www.mercadopago.com.br/integrations/v1/web-payment-checkout.js";
            mpButtonScript.setAttribute('data-preference-id', preferenceId);
            mpButtonScript.setAttribute('data-source', 'button');
            mpButtonScript.setAttribute('data-label', `PAGAR R$ ${PRICE_DISPLAY.replace('R$ ', '').replace(',', '.')}`);
            
            paymentButtonContainer.appendChild(mpButtonScript);
            
            // Adiciona um listener para simular a transa√ß√£o assim que o bot√£o for clicado 
            mpButtonScript.onload = () => {
                const mpButton = document.querySelector('.mercadopago-button');
                if (mpButton) {
                    mpButton.onclick = (e) => {
                        // O checkout do MP se abrir√°, mas iniciamos a simula√ß√£o local para a libera√ß√£o
                        
                        // 1. Fecha o modal
                        purchaseModal.classList.add('hidden');
                        
                        // 2. Mostra a tela de carregamento (Simula√ß√£o de Transa√ß√£o)
                        loadingScreen.classList.remove('hidden');

                        // 3. Simula o tempo de transa√ß√£o (5 segundos)
                        setTimeout(() => {
                            loadingScreen.classList.add('hidden');
                            
                            // 4. Libera o resultado completo (PAGAMENTO APROVADO SIMULADO)
                            unlockAccess();
                        }, 5000); // 5 segundos de espera (Tempo de Transa√ß√£o Simulado)
                    };
                }
            };
        }


        // Fun√ß√£o que realiza a SIMULA√á√ÉO de LIBERA√á√ÉO do resultado COMPLETO
        function unlockAccess() {
             const quiz = quizzes[activeQuizId];
             let totalScore = 0;
            
             // Recalcula o score
             userAnswers.forEach((answer, index) => {
                const questionNumber = index + 1;
                if (quiz.inverted_questions && quiz.inverted_questions.includes(questionNumber)) {
                    totalScore += (6 - answer);
                } else {
                    totalScore += answer;
                }
            });

            const resultData = quiz.get_result(totalScore);

             // CONTE√öDO LIBERADO FINAL (Elaborado e completo)
            quizResultArea.innerHTML = `
                <h3 class="text-3xl font-extrabold text-center mb-4 text-gray-900">‚úÖ ACESSO LIBERADO: SEU RELAT√ìRIO COMPLETO</h3>
                <div class="p-4 rounded-lg ${resultData.color} text-white text-xl font-bold text-center mb-6">
                    Diagn√≥stico Final: ${resultData.title}
                </div>
                
                <h4 class="text-xl font-bold text-gray-900 mb-3">Sua Pontua√ß√£o Total: ${totalScore} de ${quiz.questions.length * 5}</h4>

                <div class="mt-4 p-4 border border-blue-300 rounded-lg bg-blue-50 space-y-4">
                    <p class="text-base text-gray-700">
                        <span class="font-bold text-lg text-blue-800">VIS√ÉO GERAL:</span> Parab√©ns! Seu pagamento foi processado com sucesso e o Relat√≥rio Detalhado foi desbloqueado. Sua pontua√ß√£o revela uma jornada de autoconhecimento que exige ${resultData.title.includes('Baixo') ? 'foco na manuten√ß√£o do equil√≠brio' : 'a√ß√£o e aten√ß√£o imediata'}.
                    </p>
                    <p class="text-base text-gray-700">
                        <span class="font-bold text-blue-800">AN√ÅLISE PROFUNDA:</span> O seu resultado exato, ${resultData.desc.split('.')[0]}, sugere que voc√™ precisa desenvolver ${resultData.title.includes('Alto') ? 't√©cnicas de resili√™ncia e controle emocional' : 'novos desafios para o seu potencial'}.
                    </p>
                    <p class="text-base text-gray-700">
                        <span class="font-bold text-blue-800">PLANO DE A√á√ÉO IMEDIATA (30 FRASES):</span>
                        <ul class="list-disc list-inside ml-4 text-sm space-y-2 mt-2">
                            <li>üéØ **Foco no Pr√≥ximo N√≠vel:** Transforme a dor ${resultData.title.split(' ')[0]} em disciplina ativa.</li>
                            <li>üß† **Reconhecimento:** Entenda quais perguntas invertidas ${quiz.inverted_questions.length > 0 ? 'mais impactaram' : 'menos afetaram'} sua pontua√ß√£o final.</li>
                            <li>‚öñÔ∏è **Ajuste de Rota:** Dedique 15 minutos di√°rios √† pr√°tica de *Mindfulness* ou √† resolu√ß√£o de novos desafios l√≥gicos.</li>
                            <li>üå± **Desenvolvimento Pessoal:** Procure grupos de apoio ou mentores que dominem a √°rea do seu teste.</li>
                            <li>‚è±Ô∏è **Gest√£o de Energia:** Crie blocos de foco total e blocos de descanso obrigat√≥rio (o oposto do Burnout!).</li>
                            <li>üíß **Rotina Antiestresse:** Inicie o dia com alongamentos leves e defina 3 prioridades claras.</li>
                            <li>üõ†Ô∏è **Ferramentas:** Use a pontua√ß√£o total (${totalScore}) como sua m√©trica de progresso semanal.</li>
                            <li>ü§ù **Conex√£o Social:** Fortale√ßa os la√ßos com quem te apoia, reduzindo intera√ß√µes t√≥xicas.</li>
                            <li>üí° **Curiosidade Ativa:** Mantenha sua mente engajada com aprendizados fora da sua zona de conforto.</li>
                            <li>üõ°Ô∏è **Blindagem Emocional:** Aprenda a dizer "n√£o" para tarefas que n√£o contribuem para seus objetivos principais.</li>
                            <li>‚úÖ **Valida√ß√£o:** Lembre-se: O teste √© um guia, mas sua capacidade de mudar √© ilimitada.</li>
                        </ul>
                        <p class="mt-4 text-lg font-semibold text-blue-800">
                            **Recursos Adicionais e Acompanhamento:** Sua pontua√ß√£o libera acesso a um e-book gratuito sobre "${quiz.title.split(' ')[2] || 'Intelig√™ncia Emocional'}", enviado para seu e-mail de compra! Continue seu desenvolvimento.
                        </p>
                    </p>
                </div>
                 <!-- FIM DO CONTE√öDO LIBERADO -->
            `;

            quizResultArea.scrollIntoView({ behavior: 'smooth' });
        }


        // Fecha o Modal
        closeModalBtn.addEventListener('click', () => {
            purchaseModal.classList.add('hidden');
        });


        // Fun√ß√£o para calcular a pontua√ß√£o e mostrar o resultado GRATUITO (vis√£o geral)
        function calculateAndShowFreeResult() {
            const quiz = quizzes[activeQuizId];
            let totalScore = 0;
            
            userAnswers.forEach((answer, index) => {
                const questionNumber = index + 1;
                if (quiz.inverted_questions && quiz.inverted_questions.includes(questionNumber)) {
                    totalScore += (6 - answer);
                } else {
                    totalScore += answer;
                }
            });

            // Obt√©m o resultado GR√ÅTIS
            const resultData = quiz.get_result(totalScore);

            // GERA O TEXTO DE ELABORA√á√ÉO (30 FRASES SIMULADAS)
            const elaborateDescription = `
                <div class="mt-4 p-4 border border-gray-300 rounded-lg bg-gray-50">
                    <h5 class="text-lg font-bold text-gray-900 mb-3">Vis√£o Geral: Seu N√≠vel de Consci√™ncia</h5>
                    <p class="text-base text-gray-700 space-y-3">
                        <span class="block">Parab√©ns por completar sua autoavalia√ß√£o! Este teste √© o primeiro passo crucial em sua jornada de autoconhecimento. A pontua√ß√£o que voc√™ obteve reflete a intensidade de certos padr√µes emocionais e cognitivos em sua vida di√°ria.</span>
                        <span class="block">Neste momento, voc√™ identificou o seu **Status Inicial** (Sua pontua√ß√£o √© ${totalScore}). Para muitos, essa simples classifica√ß√£o j√° √© um al√≠vio, pois traz clareza sobre uma sensa√ß√£o que antes era apenas um inc√¥modo.</span>
                        <span class="block">No entanto, o n√∫mero e a classifica√ß√£o ("${resultData.title}") s√£o apenas a ponta do iceberg. A verdadeira mudan√ßa acontece quando voc√™ entende o **Porqu√™** e o **Como** por tr√°s desse resultado.</span>
                        <span class="block">Voc√™ deve estar se perguntando: "O que isso significa na pr√°tica?", "Quais perguntas espec√≠ficas me levaram a esse resultado?", ou "O que eu fa√ßo agora para mudar essa situa√ß√£o?".</span>
                        <span class="block font-bold text-red-600">A resposta detalhada a essas perguntas est√° no seu Relat√≥rio Completo e Personalizado.</span>
                        <span class="block">**O que o Relat√≥rio Completo DESBLOQUEIA:**</span>
                        <ul class="list-disc list-inside ml-4 text-sm space-y-1">
                            <li><span class="font-semibold">AN√ÅLISE DE IMPACTO:</span> Descubra em qual das 5 dimens√µes (Ex: F√≠sico, Emocional, Social) sua pontua√ß√£o √© mais alta.</li>
                            <li><span class="font-semibold">PLANO DE A√á√ÉO R√ÅPIDO:</span> Receba 10 ideias pr√°ticas e imediatas para come√ßar a gerenciar sua pontua√ß√£o hoje mesmo (Ex: Exerc√≠cios de respira√ß√£o, t√©cnicas de organiza√ß√£o).</li>
                            <li><span class="font-semibold">MAPA DO PR√ìXIMO N√çVEL:</span> Instru√ß√µes detalhadas para potencializar seus pontos fortes e enfraquecer seus pontos de desafio.</li>
                            <li><span class="font-semibold">ESCALA DE RISCO:</span> Visualiza√ß√£o gr√°fica da sua posi√ß√£o exata na escala de autoconhecimento.</li>
                            <li><span class="font-semibold">RECURSOS EXCLUSIVOS:</span> Indica√ß√£o de livros e v√≠deos para aprofundar seu entendimento.</li>
                        </ul>
                        <span class="block mt-4">N√£o se contente com a superf√≠cie. O valor deste conhecimento excede em muito o investimento de ${PRICE_DISPLAY}. √â o primeiro passo para retomar o controle da sua vida.</span>
                        <span class="block">Clique no bot√£o abaixo para desbloquear seu Relat√≥rio Completo. Seu futuro mental come√ßa agora!</span>
                    </p>
                </div>
            `;


            // Injeta o resultado na tela
            quizResultArea.classList.remove('hidden');
            quizResultArea.innerHTML = `
                <h3 class="text-2xl font-bold text-center mb-4 text-gray-900">${quiz.title}</h3>
                <h4 class="text-xl font-bold text-center mb-4">Sua Pontua√ß√£o de Fim de Quiz: ${totalScore}</h4>
                <div class="p-4 rounded-lg ${resultData.color} text-white text-xl font-bold text-center mb-6">
                    Classifica√ß√£o GR√ÅTIS: ${resultData.title}
                </div>
                ${elaborateDescription}

                <!-- CTA para Venda/Pr√≥ximo Passo -->
                <div class="text-center mt-6">
                    <button id="final-purchase-btn" class="px-8 py-4 bg-red-600 text-white text-xl font-bold rounded-lg shadow-xl hover:bg-red-700 transition duration-300">
                        DESBLOQUEAR RELAT√ìRIO COMPLETO POR ${PRICE_DISPLAY}
                    </button>
                </div>
            `;
            
            // Adiciona o listener para o novo bot√£o de compra
            document.getElementById('final-purchase-btn').addEventListener('click', () => {
                purchaseModal.classList.remove('hidden');
                // Garante que o modal mostre o pre√ßo e o t√≠tulo correto antes de abrir
                document.getElementById('modal-title').textContent = `Desbloquear Relat√≥rio ${quiz.title}`;
            });

            // Rola a tela para o resultado
            quizResultArea.scrollIntoView({ behavior: 'smooth' });
        }


        // Fun√ß√£o que Carrega o quiz selecionado e inicia o question√°rio
        function loadQuiz() {
            if (!activeQuizId) return;
            
            const quiz = quizzes[activeQuizId];
            
            // Reseta vari√°veis
            userAnswers = new Array(quiz.questions.length).fill(0);
            quizQuestionsContainer.innerHTML = '';
            quizResultArea.classList.add('hidden');
            submitQuizBtn.classList.add('hidden');

            // 1. Configura o T√≠tulo da Se√ß√£o
            activeQuizTitle.textContent = quiz.title;

            // 2. Renderiza as perguntas
            quiz.questions.forEach((questionText, index) => {
                const questionElement = document.createElement('div');
                questionElement.className = 'p-4 border border-gray-200 rounded-lg shadow-sm';
                questionElement.innerHTML = `
                    <p class="font-semibold mb-3 text-lg">${questionText}</p>
                    <div class="flex flex-wrap justify-center gap-2 sm:gap-4 mt-3" id="options-${index}">
                        ${likertScale.map(option => `
                            <div 
                                class="likert-option ${option.class} px-4 py-2 rounded-full text-sm font-medium w-full sm:w-auto text-center"
                                data-question-index="${index}"
                                data-value="${option.value}"
                            >
                                ${option.text}
                            </div>
                        `).join('')}
                    </div>
                `;
                quizQuestionsContainer.appendChild(questionElement);
            });

            // 3. Adiciona listener de clique para as op√ß√µes no novo DOM
            document.querySelectorAll('.likert-option').forEach(option => {
                option.addEventListener('click', handleOptionClick);
            });
            
            // 4. Exibe a se√ß√£o do quiz
            quizSection.classList.remove('hidden');
            quizCardsGrid.classList.add('hidden'); // Esconde cards ao iniciar
            quizSection.scrollIntoView({ behavior: 'smooth' });
        }


        // Fun√ß√£o para capturar a resposta
        function handleOptionClick(event) {
            const element = event.currentTarget;
            const questionIndex = parseInt(element.getAttribute('data-question-index'));
            const value = parseInt(element.getAttribute('data-value'));

            // Remove a sele√ß√£o antiga
            const optionsContainer = document.getElementById(`options-${questionIndex}`);
            optionsContainer.querySelectorAll('.likert-option').forEach(opt => {
                opt.classList.remove('selected-option', 'text-white', 'font-semibold');
                // Garante que as classes de cor originais voltem
                const originalClasses = likertScale.find(scale => scale.value === parseInt(opt.getAttribute('data-value'))).class;
                opt.className = `likert-option ${originalClasses} px-4 py-2 rounded-full text-sm font-medium w-full sm:w-auto text-center`;
            });

            // Adiciona a nova sele√ß√£o e a classe de estilo forte
            element.classList.add('selected-option');
            
            // Armazena a resposta
            userAnswers[questionIndex] = value;

            // Verifica se todas as perguntas foram respondidas para exibir o bot√£o de submiss√£o
            checkCompletion();
        }

        // Verifica se todas as respostas est√£o preenchidas
        function checkCompletion() {
            const allAnswered = userAnswers.every(answer => answer !== 0);

            if (allAnswered) {
                submitQuizBtn.classList.remove('hidden');
            } else {
                submitQuizBtn.classList.add('hidden');
            }
        }

        
        // Inicializa√ß√£o
        document.addEventListener('DOMContentLoaded', renderQuizCards);

    </script>
</body>
</html>
